revoke delete on table "public"."ALLOCATIONS" from "anon";

revoke insert on table "public"."ALLOCATIONS" from "anon";

revoke references on table "public"."ALLOCATIONS" from "anon";

revoke select on table "public"."ALLOCATIONS" from "anon";

revoke trigger on table "public"."ALLOCATIONS" from "anon";

revoke truncate on table "public"."ALLOCATIONS" from "anon";

revoke update on table "public"."ALLOCATIONS" from "anon";

revoke delete on table "public"."ALLOCATIONS" from "authenticated";

revoke insert on table "public"."ALLOCATIONS" from "authenticated";

revoke references on table "public"."ALLOCATIONS" from "authenticated";

revoke select on table "public"."ALLOCATIONS" from "authenticated";

revoke trigger on table "public"."ALLOCATIONS" from "authenticated";

revoke truncate on table "public"."ALLOCATIONS" from "authenticated";

revoke update on table "public"."ALLOCATIONS" from "authenticated";

revoke delete on table "public"."ALLOCATIONS" from "service_role";

revoke insert on table "public"."ALLOCATIONS" from "service_role";

revoke references on table "public"."ALLOCATIONS" from "service_role";

revoke select on table "public"."ALLOCATIONS" from "service_role";

revoke trigger on table "public"."ALLOCATIONS" from "service_role";

revoke truncate on table "public"."ALLOCATIONS" from "service_role";

revoke update on table "public"."ALLOCATIONS" from "service_role";

revoke delete on table "public"."PERMITS" from "anon";

revoke insert on table "public"."PERMITS" from "anon";

revoke references on table "public"."PERMITS" from "anon";

revoke select on table "public"."PERMITS" from "anon";

revoke trigger on table "public"."PERMITS" from "anon";

revoke truncate on table "public"."PERMITS" from "anon";

revoke update on table "public"."PERMITS" from "anon";

revoke delete on table "public"."PERMITS" from "authenticated";

revoke insert on table "public"."PERMITS" from "authenticated";

revoke references on table "public"."PERMITS" from "authenticated";

revoke select on table "public"."PERMITS" from "authenticated";

revoke trigger on table "public"."PERMITS" from "authenticated";

revoke truncate on table "public"."PERMITS" from "authenticated";

revoke update on table "public"."PERMITS" from "authenticated";

revoke delete on table "public"."PERMITS" from "service_role";

revoke insert on table "public"."PERMITS" from "service_role";

revoke references on table "public"."PERMITS" from "service_role";

revoke select on table "public"."PERMITS" from "service_role";

revoke trigger on table "public"."PERMITS" from "service_role";

revoke truncate on table "public"."PERMITS" from "service_role";

revoke update on table "public"."PERMITS" from "service_role";

revoke delete on table "public"."PROJECTS" from "anon";

revoke insert on table "public"."PROJECTS" from "anon";

revoke references on table "public"."PROJECTS" from "anon";

revoke select on table "public"."PROJECTS" from "anon";

revoke trigger on table "public"."PROJECTS" from "anon";

revoke truncate on table "public"."PROJECTS" from "anon";

revoke update on table "public"."PROJECTS" from "anon";

revoke delete on table "public"."PROJECTS" from "authenticated";

revoke insert on table "public"."PROJECTS" from "authenticated";

revoke references on table "public"."PROJECTS" from "authenticated";

revoke select on table "public"."PROJECTS" from "authenticated";

revoke trigger on table "public"."PROJECTS" from "authenticated";

revoke truncate on table "public"."PROJECTS" from "authenticated";

revoke update on table "public"."PROJECTS" from "authenticated";

revoke delete on table "public"."PROJECTS" from "service_role";

revoke insert on table "public"."PROJECTS" from "service_role";

revoke references on table "public"."PROJECTS" from "service_role";

revoke select on table "public"."PROJECTS" from "service_role";

revoke trigger on table "public"."PROJECTS" from "service_role";

revoke truncate on table "public"."PROJECTS" from "service_role";

revoke update on table "public"."PROJECTS" from "service_role";

revoke delete on table "public"."ROLES" from "anon";

revoke insert on table "public"."ROLES" from "anon";

revoke references on table "public"."ROLES" from "anon";

revoke select on table "public"."ROLES" from "anon";

revoke trigger on table "public"."ROLES" from "anon";

revoke truncate on table "public"."ROLES" from "anon";

revoke update on table "public"."ROLES" from "anon";

revoke delete on table "public"."ROLES" from "authenticated";

revoke insert on table "public"."ROLES" from "authenticated";

revoke references on table "public"."ROLES" from "authenticated";

revoke select on table "public"."ROLES" from "authenticated";

revoke trigger on table "public"."ROLES" from "authenticated";

revoke truncate on table "public"."ROLES" from "authenticated";

revoke update on table "public"."ROLES" from "authenticated";

revoke delete on table "public"."ROLES" from "service_role";

revoke insert on table "public"."ROLES" from "service_role";

revoke references on table "public"."ROLES" from "service_role";

revoke select on table "public"."ROLES" from "service_role";

revoke trigger on table "public"."ROLES" from "service_role";

revoke truncate on table "public"."ROLES" from "service_role";

revoke update on table "public"."ROLES" from "service_role";

revoke delete on table "public"."STATUSES" from "anon";

revoke insert on table "public"."STATUSES" from "anon";

revoke references on table "public"."STATUSES" from "anon";

revoke select on table "public"."STATUSES" from "anon";

revoke trigger on table "public"."STATUSES" from "anon";

revoke truncate on table "public"."STATUSES" from "anon";

revoke update on table "public"."STATUSES" from "anon";

revoke delete on table "public"."STATUSES" from "authenticated";

revoke insert on table "public"."STATUSES" from "authenticated";

revoke references on table "public"."STATUSES" from "authenticated";

revoke select on table "public"."STATUSES" from "authenticated";

revoke trigger on table "public"."STATUSES" from "authenticated";

revoke truncate on table "public"."STATUSES" from "authenticated";

revoke update on table "public"."STATUSES" from "authenticated";

revoke delete on table "public"."STATUSES" from "service_role";

revoke insert on table "public"."STATUSES" from "service_role";

revoke references on table "public"."STATUSES" from "service_role";

revoke select on table "public"."STATUSES" from "service_role";

revoke trigger on table "public"."STATUSES" from "service_role";

revoke truncate on table "public"."STATUSES" from "service_role";

revoke update on table "public"."STATUSES" from "service_role";

revoke delete on table "public"."TIMESHEETS" from "anon";

revoke insert on table "public"."TIMESHEETS" from "anon";

revoke references on table "public"."TIMESHEETS" from "anon";

revoke select on table "public"."TIMESHEETS" from "anon";

revoke trigger on table "public"."TIMESHEETS" from "anon";

revoke truncate on table "public"."TIMESHEETS" from "anon";

revoke update on table "public"."TIMESHEETS" from "anon";

revoke delete on table "public"."TIMESHEETS" from "authenticated";

revoke insert on table "public"."TIMESHEETS" from "authenticated";

revoke references on table "public"."TIMESHEETS" from "authenticated";

revoke select on table "public"."TIMESHEETS" from "authenticated";

revoke trigger on table "public"."TIMESHEETS" from "authenticated";

revoke truncate on table "public"."TIMESHEETS" from "authenticated";

revoke update on table "public"."TIMESHEETS" from "authenticated";

revoke delete on table "public"."TIMESHEETS" from "service_role";

revoke insert on table "public"."TIMESHEETS" from "service_role";

revoke references on table "public"."TIMESHEETS" from "service_role";

revoke select on table "public"."TIMESHEETS" from "service_role";

revoke trigger on table "public"."TIMESHEETS" from "service_role";

revoke truncate on table "public"."TIMESHEETS" from "service_role";

revoke update on table "public"."TIMESHEETS" from "service_role";

revoke delete on table "public"."USERS" from "anon";

revoke insert on table "public"."USERS" from "anon";

revoke references on table "public"."USERS" from "anon";

revoke select on table "public"."USERS" from "anon";

revoke trigger on table "public"."USERS" from "anon";

revoke truncate on table "public"."USERS" from "anon";

revoke update on table "public"."USERS" from "anon";

revoke delete on table "public"."USERS" from "authenticated";

revoke insert on table "public"."USERS" from "authenticated";

revoke references on table "public"."USERS" from "authenticated";

revoke select on table "public"."USERS" from "authenticated";

revoke trigger on table "public"."USERS" from "authenticated";

revoke truncate on table "public"."USERS" from "authenticated";

revoke update on table "public"."USERS" from "authenticated";

revoke delete on table "public"."USERS" from "service_role";

revoke insert on table "public"."USERS" from "service_role";

revoke references on table "public"."USERS" from "service_role";

revoke select on table "public"."USERS" from "service_role";

revoke trigger on table "public"."USERS" from "service_role";

revoke truncate on table "public"."USERS" from "service_role";

revoke update on table "public"."USERS" from "service_role";

alter table "public"."ALLOCATIONS" drop constraint "ALLOCATIONS_project_id_fkey";

alter table "public"."ALLOCATIONS" drop constraint "ALLOCATIONS_user_id_fkey";

alter table "public"."PERMITS" drop constraint "PERMITS_reviewer_id_fkey";

alter table "public"."PERMITS" drop constraint "PERMITS_user_id_fkey";

alter table "public"."PROJECTS" drop constraint "PROJECTS_status_id_fkey";

alter table "public"."TIMESHEETS" drop constraint "TIMESHEETS_project_id_fkey";

alter table "public"."TIMESHEETS" drop constraint "TIMESHEETS_user_id_fkey";

alter table "public"."USERS" drop constraint "USERS_auth_id_key";

alter table "public"."USERS" drop constraint "USERS_email_key";

alter table "public"."USERS" drop constraint "USERS_role_id_fkey";

alter table "public"."ALLOCATIONS" drop constraint "ALLOCATIONS_pkey";

alter table "public"."PERMITS" drop constraint "PERMITS_pkey";

alter table "public"."PROJECTS" drop constraint "PROJECTS_pkey";

alter table "public"."ROLES" drop constraint "ROLES_pkey";

alter table "public"."STATUSES" drop constraint "STATUS_pkey";

alter table "public"."TIMESHEETS" drop constraint "TIMESHEETS_pkey";

alter table "public"."USERS" drop constraint "USERS_pkey";

drop index if exists "public"."ALLOCATIONS_pkey";

drop index if exists "public"."PERMITS_pkey";

drop index if exists "public"."PROJECTS_pkey";

drop index if exists "public"."ROLES_pkey";

drop index if exists "public"."STATUS_pkey";

drop index if exists "public"."TIMESHEETS_pkey";

drop index if exists "public"."USERS_auth_id_key";

drop index if exists "public"."USERS_email_key";

drop index if exists "public"."USERS_pkey";

drop table "public"."ALLOCATIONS";

drop table "public"."PERMITS";

drop table "public"."PROJECTS";

drop table "public"."ROLES";

drop table "public"."STATUSES";

drop table "public"."TIMESHEETS";

drop table "public"."USERS";

create table "public"."Allocations" (
    "created_at" timestamp with time zone not null default now(),
    "user_id" uuid not null,
    "project_id" uuid not null,
    "start_date" timestamp without time zone not null default now(),
    "end_date" timestamp without time zone,
    "percentage" smallint not null default '100'::smallint
);


alter table "public"."Allocations" enable row level security;

create table "public"."Permits" (
    "created_at" timestamp with time zone not null default now(),
    "user_id" uuid not null,
    "duration" numeric not null,
    "id" uuid not null default gen_random_uuid(),
    "description" text,
    "type" text not null default 'Holiday'::text,
    "start_date" timestamp without time zone not null,
    "status" text not null default 'Waiting'::text,
    "reviewer_id" uuid not null,
    "end_date" timestamp without time zone
);


alter table "public"."Permits" enable row level security;

create table "public"."Projects" (
    "id" uuid not null default gen_random_uuid(),
    "created_at" timestamp with time zone not null default now(),
    "name" character varying not null,
    "client" character varying not null,
    "description" text,
    "start_date" timestamp without time zone not null,
    "end_date" timestamp without time zone,
    "status_id" uuid not null
);


alter table "public"."Projects" enable row level security;

create table "public"."Roles" (
    "id" uuid not null default gen_random_uuid(),
    "created_at" timestamp with time zone not null default now(),
    "label" character varying not null
);


alter table "public"."Roles" enable row level security;

create table "public"."Statuses" (
    "id" uuid not null default gen_random_uuid(),
    "created_at" timestamp with time zone not null default now(),
    "name" character varying not null
);


alter table "public"."Statuses" enable row level security;

create table "public"."Timesheets" (
    "id" bigint generated by default as identity not null,
    "created_at" timestamp with time zone not null default now(),
    "date" date not null,
    "project_id" uuid not null,
    "user_id" uuid not null,
    "description" character varying
);


alter table "public"."Timesheets" enable row level security;

create table "public"."Users" (
    "id" uuid not null default gen_random_uuid(),
    "created_at" timestamp with time zone not null default now(),
    "email" text not null,
    "name" text not null,
    "avatar_url" text,
    "auth_id" character varying,
    "role_id" uuid
);


alter table "public"."Users" enable row level security;

CREATE UNIQUE INDEX "Allocations_pkey" ON public."Allocations" USING btree (user_id, project_id);

CREATE UNIQUE INDEX "PERMITS_pkey" ON public."Permits" USING btree (id);

CREATE UNIQUE INDEX "PROJECTS_pkey" ON public."Projects" USING btree (id);

CREATE UNIQUE INDEX "ROLES_pkey" ON public."Roles" USING btree (id);

CREATE UNIQUE INDEX "STATUS_pkey" ON public."Statuses" USING btree (id);

CREATE UNIQUE INDEX "TIMESHEETS_pkey" ON public."Timesheets" USING btree (id);

CREATE UNIQUE INDEX "USERS_auth_id_key" ON public."Users" USING btree (auth_id);

CREATE UNIQUE INDEX "USERS_email_key" ON public."Users" USING btree (email);

CREATE UNIQUE INDEX "USERS_pkey" ON public."Users" USING btree (id);

alter table "public"."Allocations" add constraint "Allocations_pkey" PRIMARY KEY using index "Allocations_pkey";

alter table "public"."Permits" add constraint "PERMITS_pkey" PRIMARY KEY using index "PERMITS_pkey";

alter table "public"."Projects" add constraint "PROJECTS_pkey" PRIMARY KEY using index "PROJECTS_pkey";

alter table "public"."Roles" add constraint "ROLES_pkey" PRIMARY KEY using index "ROLES_pkey";

alter table "public"."Statuses" add constraint "STATUS_pkey" PRIMARY KEY using index "STATUS_pkey";

alter table "public"."Timesheets" add constraint "TIMESHEETS_pkey" PRIMARY KEY using index "TIMESHEETS_pkey";

alter table "public"."Users" add constraint "USERS_pkey" PRIMARY KEY using index "USERS_pkey";

alter table "public"."Allocations" add constraint "ALLOCATIONS_project_id_fkey" FOREIGN KEY (project_id) REFERENCES "Projects"(id) not valid;

alter table "public"."Allocations" validate constraint "ALLOCATIONS_project_id_fkey";

alter table "public"."Allocations" add constraint "ALLOCATIONS_user_id_fkey" FOREIGN KEY (user_id) REFERENCES "Users"(id) not valid;

alter table "public"."Allocations" validate constraint "ALLOCATIONS_user_id_fkey";

alter table "public"."Permits" add constraint "PERMITS_reviewer_id_fkey" FOREIGN KEY (reviewer_id) REFERENCES "Users"(id) not valid;

alter table "public"."Permits" validate constraint "PERMITS_reviewer_id_fkey";

alter table "public"."Permits" add constraint "PERMITS_user_id_fkey" FOREIGN KEY (user_id) REFERENCES "Users"(id) not valid;

alter table "public"."Permits" validate constraint "PERMITS_user_id_fkey";

alter table "public"."Projects" add constraint "PROJECTS_status_id_fkey" FOREIGN KEY (status_id) REFERENCES "Statuses"(id) ON UPDATE CASCADE ON DELETE SET DEFAULT not valid;

alter table "public"."Projects" validate constraint "PROJECTS_status_id_fkey";

alter table "public"."Timesheets" add constraint "TIMESHEETS_project_id_fkey" FOREIGN KEY (project_id) REFERENCES "Projects"(id) not valid;

alter table "public"."Timesheets" validate constraint "TIMESHEETS_project_id_fkey";

alter table "public"."Timesheets" add constraint "TIMESHEETS_user_id_fkey" FOREIGN KEY (user_id) REFERENCES "Users"(id) not valid;

alter table "public"."Timesheets" validate constraint "TIMESHEETS_user_id_fkey";

alter table "public"."Users" add constraint "USERS_auth_id_key" UNIQUE using index "USERS_auth_id_key";

alter table "public"."Users" add constraint "USERS_email_key" UNIQUE using index "USERS_email_key";

alter table "public"."Users" add constraint "USERS_role_id_fkey" FOREIGN KEY (role_id) REFERENCES "Roles"(id) not valid;

alter table "public"."Users" validate constraint "USERS_role_id_fkey";

grant delete on table "public"."Allocations" to "anon";

grant insert on table "public"."Allocations" to "anon";

grant references on table "public"."Allocations" to "anon";

grant select on table "public"."Allocations" to "anon";

grant trigger on table "public"."Allocations" to "anon";

grant truncate on table "public"."Allocations" to "anon";

grant update on table "public"."Allocations" to "anon";

grant delete on table "public"."Allocations" to "authenticated";

grant insert on table "public"."Allocations" to "authenticated";

grant references on table "public"."Allocations" to "authenticated";

grant select on table "public"."Allocations" to "authenticated";

grant trigger on table "public"."Allocations" to "authenticated";

grant truncate on table "public"."Allocations" to "authenticated";

grant update on table "public"."Allocations" to "authenticated";

grant delete on table "public"."Allocations" to "service_role";

grant insert on table "public"."Allocations" to "service_role";

grant references on table "public"."Allocations" to "service_role";

grant select on table "public"."Allocations" to "service_role";

grant trigger on table "public"."Allocations" to "service_role";

grant truncate on table "public"."Allocations" to "service_role";

grant update on table "public"."Allocations" to "service_role";

grant delete on table "public"."Permits" to "anon";

grant insert on table "public"."Permits" to "anon";

grant references on table "public"."Permits" to "anon";

grant select on table "public"."Permits" to "anon";

grant trigger on table "public"."Permits" to "anon";

grant truncate on table "public"."Permits" to "anon";

grant update on table "public"."Permits" to "anon";

grant delete on table "public"."Permits" to "authenticated";

grant insert on table "public"."Permits" to "authenticated";

grant references on table "public"."Permits" to "authenticated";

grant select on table "public"."Permits" to "authenticated";

grant trigger on table "public"."Permits" to "authenticated";

grant truncate on table "public"."Permits" to "authenticated";

grant update on table "public"."Permits" to "authenticated";

grant delete on table "public"."Permits" to "service_role";

grant insert on table "public"."Permits" to "service_role";

grant references on table "public"."Permits" to "service_role";

grant select on table "public"."Permits" to "service_role";

grant trigger on table "public"."Permits" to "service_role";

grant truncate on table "public"."Permits" to "service_role";

grant update on table "public"."Permits" to "service_role";

grant delete on table "public"."Projects" to "anon";

grant insert on table "public"."Projects" to "anon";

grant references on table "public"."Projects" to "anon";

grant select on table "public"."Projects" to "anon";

grant trigger on table "public"."Projects" to "anon";

grant truncate on table "public"."Projects" to "anon";

grant update on table "public"."Projects" to "anon";

grant delete on table "public"."Projects" to "authenticated";

grant insert on table "public"."Projects" to "authenticated";

grant references on table "public"."Projects" to "authenticated";

grant select on table "public"."Projects" to "authenticated";

grant trigger on table "public"."Projects" to "authenticated";

grant truncate on table "public"."Projects" to "authenticated";

grant update on table "public"."Projects" to "authenticated";

grant delete on table "public"."Projects" to "service_role";

grant insert on table "public"."Projects" to "service_role";

grant references on table "public"."Projects" to "service_role";

grant select on table "public"."Projects" to "service_role";

grant trigger on table "public"."Projects" to "service_role";

grant truncate on table "public"."Projects" to "service_role";

grant update on table "public"."Projects" to "service_role";

grant delete on table "public"."Roles" to "anon";

grant insert on table "public"."Roles" to "anon";

grant references on table "public"."Roles" to "anon";

grant select on table "public"."Roles" to "anon";

grant trigger on table "public"."Roles" to "anon";

grant truncate on table "public"."Roles" to "anon";

grant update on table "public"."Roles" to "anon";

grant delete on table "public"."Roles" to "authenticated";

grant insert on table "public"."Roles" to "authenticated";

grant references on table "public"."Roles" to "authenticated";

grant select on table "public"."Roles" to "authenticated";

grant trigger on table "public"."Roles" to "authenticated";

grant truncate on table "public"."Roles" to "authenticated";

grant update on table "public"."Roles" to "authenticated";

grant delete on table "public"."Roles" to "service_role";

grant insert on table "public"."Roles" to "service_role";

grant references on table "public"."Roles" to "service_role";

grant select on table "public"."Roles" to "service_role";

grant trigger on table "public"."Roles" to "service_role";

grant truncate on table "public"."Roles" to "service_role";

grant update on table "public"."Roles" to "service_role";

grant delete on table "public"."Statuses" to "anon";

grant insert on table "public"."Statuses" to "anon";

grant references on table "public"."Statuses" to "anon";

grant select on table "public"."Statuses" to "anon";

grant trigger on table "public"."Statuses" to "anon";

grant truncate on table "public"."Statuses" to "anon";

grant update on table "public"."Statuses" to "anon";

grant delete on table "public"."Statuses" to "authenticated";

grant insert on table "public"."Statuses" to "authenticated";

grant references on table "public"."Statuses" to "authenticated";

grant select on table "public"."Statuses" to "authenticated";

grant trigger on table "public"."Statuses" to "authenticated";

grant truncate on table "public"."Statuses" to "authenticated";

grant update on table "public"."Statuses" to "authenticated";

grant delete on table "public"."Statuses" to "service_role";

grant insert on table "public"."Statuses" to "service_role";

grant references on table "public"."Statuses" to "service_role";

grant select on table "public"."Statuses" to "service_role";

grant trigger on table "public"."Statuses" to "service_role";

grant truncate on table "public"."Statuses" to "service_role";

grant update on table "public"."Statuses" to "service_role";

grant delete on table "public"."Timesheets" to "anon";

grant insert on table "public"."Timesheets" to "anon";

grant references on table "public"."Timesheets" to "anon";

grant select on table "public"."Timesheets" to "anon";

grant trigger on table "public"."Timesheets" to "anon";

grant truncate on table "public"."Timesheets" to "anon";

grant update on table "public"."Timesheets" to "anon";

grant delete on table "public"."Timesheets" to "authenticated";

grant insert on table "public"."Timesheets" to "authenticated";

grant references on table "public"."Timesheets" to "authenticated";

grant select on table "public"."Timesheets" to "authenticated";

grant trigger on table "public"."Timesheets" to "authenticated";

grant truncate on table "public"."Timesheets" to "authenticated";

grant update on table "public"."Timesheets" to "authenticated";

grant delete on table "public"."Timesheets" to "service_role";

grant insert on table "public"."Timesheets" to "service_role";

grant references on table "public"."Timesheets" to "service_role";

grant select on table "public"."Timesheets" to "service_role";

grant trigger on table "public"."Timesheets" to "service_role";

grant truncate on table "public"."Timesheets" to "service_role";

grant update on table "public"."Timesheets" to "service_role";

grant delete on table "public"."Users" to "anon";

grant insert on table "public"."Users" to "anon";

grant references on table "public"."Users" to "anon";

grant select on table "public"."Users" to "anon";

grant trigger on table "public"."Users" to "anon";

grant truncate on table "public"."Users" to "anon";

grant update on table "public"."Users" to "anon";

grant delete on table "public"."Users" to "authenticated";

grant insert on table "public"."Users" to "authenticated";

grant references on table "public"."Users" to "authenticated";

grant select on table "public"."Users" to "authenticated";

grant trigger on table "public"."Users" to "authenticated";

grant truncate on table "public"."Users" to "authenticated";

grant update on table "public"."Users" to "authenticated";

grant delete on table "public"."Users" to "service_role";

grant insert on table "public"."Users" to "service_role";

grant references on table "public"."Users" to "service_role";

grant select on table "public"."Users" to "service_role";

grant trigger on table "public"."Users" to "service_role";

grant truncate on table "public"."Users" to "service_role";

grant update on table "public"."Users" to "service_role";


